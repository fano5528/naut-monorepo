# Git Tracking Guide for naut-monorepo

## ✅ SHOULD Be Tracked (Committed to Git)

### Configuration Files
- `package.json` (root and all apps)
- `pnpm-workspace.yaml`
- `pnpm-lock.yaml` ⚠️ **IMPORTANT: Needed for reproducible builds**
- `turbo.json`
- `tsconfig.json` files
- `.gitignore` files
- `next.config.ts` / `next.config.js`
- `tailwind.config.ts`
- `postcss.config.mjs`
- `drizzle.config.ts`
- `eslint.config.mjs`
- `components.json`

### Source Code
- All `.ts`, `.tsx`, `.js`, `.jsx` files in `src/`, `app/`, `components/`, `lib/`, etc.
- All `.css`, `.scss` files
- Database migration files (`.sql` files in `migrations/`)
- Database migration metadata (`.json` files in `migrations/meta/`)

### Documentation
- `README.md` files
- Documentation `.md` files
- `MIGRATION_NOTES.md`
- `GIT_TRACKING_GUIDE.md` (this file)

### Public Assets
- Files in `public/` directories (images, fonts, etc.)
- Font files (`.woff`, `.woff2`, `.ttf`, `.otf`)
- SVG files
- CSS files in `public/`

---

## ❌ SHOULD NOT Be Tracked (In .gitignore)

### Dependencies
- ❌ `node_modules/` (everywhere)
- ❌ `.pnpm-store/`
- ❌ `.yarn/`
- ❌ `.pnp`, `.pnp.js`

### Build Artifacts
- ❌ `.next/` (Next.js build output)
- ❌ `out/` (Next.js export output)
- ❌ `dist/` (TypeScript/build output)
- ❌ `build/` (general build output)
- ❌ `.turbo/` (Turbo cache)
- ❌ `.cache/`
- ❌ `*.tsbuildinfo` (TypeScript incremental build info)

### Environment & Secrets
- ❌ `.env` (contains secrets)
- ❌ `.env*.local`
- ❌ `.env.development.local`
- ❌ `.env.test.local`
- ❌ `.env.production.local`
- ❌ `.clerk/` (Clerk configuration - may contain secrets)

### Deployment
- ❌ `.vercel/` (Vercel deployment config)

### Logs & Debug Files
- ❌ `*.log`
- ❌ `npm-debug.log*`
- ❌ `yarn-debug.log*`
- ❌ `yarn-error.log*`
- ❌ `pnpm-debug.log*`

### IDE & Editor Files
- ❌ `.vscode/` (personal IDE settings)
- ❌ `.idea/` (JetBrains IDEs)
- ❌ `*.swp`, `*.swo` (Vim)
- ❌ `*~` (backup files)

### OS Files
- ❌ `.DS_Store` (macOS)
- ❌ `Thumbs.db` (Windows)
- ❌ `*.pem` (certificates)

### TypeScript
- ❌ `next-env.d.ts` (auto-generated by Next.js)
- ❌ `*.tsbuildinfo`

---

## 🔧 What Was Fixed

### Problems Found:
1. ✅ **17 node_modules files were being tracked** - Now removed
2. ✅ Root `.gitignore` wasn't comprehensive enough - Now fixed
3. ✅ Using `**` patterns to catch files in all subdirectories

### Changes Made:
1. Enhanced root `.gitignore` with comprehensive patterns
2. Removed tracked `node_modules/` files from git using `git rm -r --cached`
3. Added IDE and cache directory ignores
4. Ensured `pnpm-lock.yaml` remains tracked (needed for reproducible builds)

---

## 📊 Current Status

```bash
# Check what's tracked
git ls-files | wc -l

# Check for accidentally tracked files
git ls-files | grep -E "(node_modules|\.next|\.turbo|dist/|build/)"

# Should return nothing if clean!
```

### Repo Size
- Before cleanup: Git tracking 17+ node_modules files
- After cleanup: Clean - only source and config files tracked
- Current .git size: ~17MB (reasonable for this size project)

---

## 🚀 Best Practices

1. **Never commit `node_modules/`** - Dependencies should be installed via `pnpm install`
2. **Never commit `.env` files** - Use environment variables or secret management
3. **Never commit build artifacts** - They should be generated during build/deploy
4. **Always commit lockfiles** - `pnpm-lock.yaml` ensures reproducible builds
5. **Keep .gitignore updated** - Add new patterns as your project grows

---

## 🔍 How to Check for Issues

```bash
# See what's modified/staged
git status

# See all tracked files
git ls-files

# Find large files in repo
git ls-files | xargs du -h | sort -h -r | head -20

# Check for node_modules being tracked (should be empty)
git ls-files | grep node_modules
```

---

## 📝 Notes for Team

- The root `.gitignore` now handles all apps and packages
- App-level `.gitignore` files are kept for individual tooling but root takes precedence
- If you see `node_modules` in `git status`, don't commit them - update `.gitignore`
- The `.pnpm-store/` directory is ignored - it's a cache, not source code

